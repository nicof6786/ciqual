<html ng-app="ciqual">
<head>
<title>Ciqual</title>
<meta charset="UTF-8" />
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" />
<link rel="stylesheet" href="ciqual.css" />
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>
<script src="//code.angularjs.org/1.4.4/i18n/angular-locale_fr-fr.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-resource.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="//twitter.github.com/typeahead.js/releases/latest/typeahead.bundle.min.js"></script>
<script src="angular-typeahead.min.js"></script>
<script src="ciqual.js"></script>
</head>
<body>
<div class="container-fluid" ng-controller="CiqualController">
	<div class="page-header">
		<h1>Ciqual</h1>
	</div>
	<form no-validate>
	<div class="panel panel-default">
		<div class="panel-heading">
			<h2 class="panel-title">Ingrédients</h2>
		</div>
		<table class="table table-condensed">
		<colgroup>
			<col width="500" />
			<col width="100" />
			<col width="100" />
			<col width="100" />
			<col width="100" />
			<col width="100" />
		</colgroup>
		<thead>
			<tr>
				<th>Ingrédient</th>
				<th>Poids</th>
				<th>Protéines</th>
				<th>Glucides</th>
				<th>Lipides</th>
				<th>Énergie</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="ingredient in ingredients">
				<td>
					<input class="form-control sfTypeahead" type="text" datasets="ingredientsDataset" options="typeaheadOptions" ng-model="ingredient.selected" placeholder="Ingrédient" />
				</td>
				<td>
					<div class="input-group">
						<input class="form-control" type="number" placeholder="Poids" ng-model="ingredient.poids" />
						<span class="input-group-addon">g</span>
					</div>
				</td>
				<td>
					<span ng-show="ingredient.selected.proteines">{{ingredient.selected.proteines * ingredient.poids / 100 | number:2}} g</span>
				</td>
				<td>
					<span ng-show="ingredient.selected.glucides">{{ingredient.selected.glucides * ingredient.poids / 100 | number:2}} g</span>
				</td>
				<td>
					<span ng-show="ingredient.selected.lipides">{{ingredient.selected.lipides * ingredient.poids / 100 | number:2}} g</span>
				</td>
				<td>
					<span ng-show="ingredient.selected.energie">{{ingredient.selected.energie * ingredient.poids / 100 | number:2}} kcal</span>
				</td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<th>Total</th>
				<th>{{total.poids | number:2}} g</th>
				<th>{{total.proteines | number:2}} g</th>
				<th>{{total.glucides | number:2}} g</th>
				<th>{{total.lipides | number:2}} g</th>
				<th>{{total.energie | number:2}} kcal</th>
			</tr>
		</tfoot>
		</table>
	</div>
	</form>
</div>
</body>
</html>